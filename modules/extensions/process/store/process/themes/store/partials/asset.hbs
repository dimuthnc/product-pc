<script>
    var isSocial = ('{{features.social.enabled}}' == 'true');
    var guestDomain = '{{guestDomain}}';
</script>
<div class="asset-description">

{{#with assets}}


    {{#with attributes}}
            <div class="asset-description-header">
                <div class="es-col-lg-12 col-lg-12 white-bg left ">
                    <h3 >{{overview_name}}</h3>
                    <div class="clear"></div>
                </div>
            </div>
            <!-- asset details folder-->
            <div class="asset-details-header ">
                <!-- aset details -->
                <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5 white-bg">
                    <div class=" details-image white-bg">
                        {{> asset-thumbnail ..}}
                    </div>
                    <div class="details-container">
                        <div class="pull-left">
                            <p class="grey padding-none margin-none">{{t "Version"}} {{overview_version}}</p>
                            <p class="light-blue padding-none margin-none">{{t "by"}} {{overview_provider}}</p>
                        <span class="pull-left asset-rating">
                        <div style="width:{{../ratingPx}}px"></div>
                        </span>
                            <span class = "pull-left rating-count"> ( <i class="fa fa-users"></i> {{../count}} )</span>
                            <div class="clearfix"></div>
                            {{#hasAssetPermission . key="ASSET_BOOKMARK" type=../../rxt.shortName username=../../cuser.username tenantId=../../cuser.tenantId}}
                                {{>asset-utilization ../../..}}
                            {{/hasAssetPermission}}
                            {{> asset-version-info ../..}}
                        </div>
                    </div>
                </div>
                <!-- end of asset details-->
            </div>
            <div class="white-bg asset-details-wrapper ">
                <div class="col-xs-12 col-sm-12 col-md-12 es-col-lg-12 col-lg-12">
                    {{#if overview_description}}
                        <h4>Summary</h4>
                        <p>{{>overview .}}</p>
                        <hr>
                    {{/if}}
                    {{>tags ../../.}}
                </div><!-- description column-->

            </div>
        </div>
        <div>
            <!-- asset description -->
            <div class="assetp-properties">
                <hr class="margin-bottom-double">
                <ul class="nav nav-tabs" id="assetp-tabs" data-aid="{{../path}}">
                    <!--<li class="active">
                            <a href="#tab-properties" data-toggle="tab" data-type="basic">{{t "Description"}}</a>
                        </li>-->
                    <li class="active">
                        <a href="#tab-text" id="tab-processtext" data-toggle="tab"
                           data-type="basic">{{t "Text"}}</a>
                    </li>
                    <li>
                        <a href="#tab-bpmn" data-toggle="tab" id="tab-model"
                           data-type="basic">{{t "BPMN Model "}}</a>
                    </li>
                    <li>
                        <a href="#tab-associations" data-toggle="tab" id="tab-relations"
                           data-type="basic">{{t "Associations "}}</a>
                    </li>
                    <li>
                        <a href="#tab-documents" id="tab-doc-list" data-toggle="tab"
                           data-type="basic">{{t "Documents"}}</a>
                    </li>
                    <li>
                        <a href="#tab-flowchart" onclick="_loadFlowChart('{{overview_name}}/{{overview_version}}');" id="tab-fc-list" data-toggle="tab"
                           data-type="basic">{{t "Flowchart"}}</a>
                    </li>
                    {{#hasAssetPermission . key="ASSET_REVIEWS" type=../../rxt.shortName username=../../cuser.username tenantId=../../cuser.tenantId}}
                        <li>
                            <a href="#tab-reviews" data-toggle="tab" data-type="comments">{{t "User Reviews"}}</a>
                        </li>
                    {{/hasAssetPermission}}
                    <li>
                        <a href="#tab-share" data-toggle="tab" data-type="basic">{{t "Share"}}</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <!--<div class="tab-pane active" id="tab-properties">
                            <div class="content">
                                {{>overview .}}
                            </div>
                        </div>-->
                    {{#if ../../cuser.username}}
                    <!--Process Text-->
                        <div class="tab-pane active" id="tab-text">

                            <div id="divTextProcessPath" style="display: none;">
                                {{properties_processtextpath}}
                            </div>

                            <div class="content">

                            </div>
                        </div>
                    <!--Associations-->
                        <div class="tab-pane" id="tab-associations">
                            <div id="divProcessName" style="display: none;">
                                {{overview_name}}
                            </div>
                            <div class="content">
                                <div class="panel-group">
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h4 class="panel-title">
                                                <a data-toggle="collapse"
                                                   href="#collapsePredecessor">Predecessors</a>
                                            </h4>
                                        </div>
                                        <div id="collapsePredecessor"
                                             class="panel-collapse collapse">
                                            <ul class="list-group" id="predecessor-list-group"></ul>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h4 class="panel-title">
                                                <a data-toggle="collapse" href="#collapseSuccessor">Successors</a>
                                            </h4>
                                        </div>
                                        <div id="collapseSuccessor" class="panel-collapse collapse">
                                            <ul class="list-group" id="successor-list-group"></ul>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h4 class="panel-title">
                                                <a data-toggle="collapse"
                                                   href="#collapseSubprocess">Sub Processes</a>
                                            </h4>
                                        </div>
                                        <div id="collapseSubprocess"
                                             class="panel-collapse collapse">
                                            <ul class="list-group" id="subprocess-list-group"></ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    <!--BPMN-->
                        <div class="tab-pane" id="tab-bpmn">
                            <div id="divBpmnPath" style="display: none;">
                                {{properties_bpmnpath}}
                            </div>
                            <div class="content">
                                <img id="bpmnImage"/>
                            </div>
                        </div>

                    <!--Documents-->
                        <div class="tab-pane" id="tab-documents">
                            <div class="content">
                                <div class="row-fluid">
                                    <div class="span12">
                                        <table class="table table-bordered" id="docTable">
                                            <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Summary</th>
                                                <th>Action</th>
                                            </tr>
                                            </thead>
                                            <tbody id="listDocs">
                                            </tbody>
                                        </table>
                                    </div>
                                    <div id="googleDocViewer">
                                    </div>
                                    <div id="pdfDocViewer">
                                    </div>
                                </div>
                            </div>
                        </div>

                    <!--Flowchart-->
                        <div class="tab-pane" id="tab-flowchart">
                            <div class="content" id="fc-content">
                                <div class="row-fluid">
                                    <div class="span12">
                                        <div class="jtk-demo-main" id="fc-demo">
                                            <div class="jtk-demo-canvas canvas-wide flowchart-demo jtk-surface  jtk-surface-nopan"
                                                 id="editor_canvas">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    {{else}}
                    <!--<div id="loginError"><b>Please Sign in to continue</b></div> -->
                        <div class="tab-pane active" id="tab-associations"><div class="content"><b>Please Sign in to continue</b></div></div>
                        <div class="tab-pane" id="tab-bpmn"><div class="content"><b>Please Sign in to continue</b></div></div>
                        <div class="tab-pane" id="tab-flowchart"><div class="content"><b>Please Sign in to continue</b></div></div>
                        <div class="tab-pane" id="tab-documents"><div class="content"><b>Please Sign in to continue</b></div></div>
                    {{/if}}
                    <div class="tab-pane" id="tab-share">
                        <div class="content">
                            {{>share ../..}}
                        </div>
                    </div>
                    {{#hasAssetPermission . key="ASSET_REVIEWS" type=../../rxt.shortName username=../../cuser.username tenantId=../../cuser.tenantId}}
                        <div class="tab-pane" id="tab-reviews">
                            {{#if ../../../features.social.enabled}}
                                <iframe src='{{url ""}}/pages/user-reviews?target={{../../../type}}:{{../../../id}}&url-domain={{../../../../features.social.keys.urlDomain}}' data-script='{{url ""}}/extensions/app/social-reviews/export-js/social.js' data-script-type="text/javascript" width="100%" height="100%" style="min-height: 500px;"></iframe>
                            {{/if}}
                            {{#if ../../../inDashboard}}
                                <div id="comment-content" class="content"></div>
                            {{else}}
                                <div id="comment-content" class="content user-review"></div>
                            {{/if}}
                        </div>
                    {{/hasAssetPermission}}
                </div>
            </div>
    {{/with}}
{{/with}}
</div>
